<!DOCTYPE HTML>
<html lang="en-US">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Behavior | Official Backbone.Marionette Doc</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="alchapone">
        <meta name="description" content="This Doc is build for developers so that it&#39;s easier to read and examine Marionettejs doc.
Built using [Gitbook](https://github.com/GitbookIO/gitbook).">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../../marionette/behavior/behaviors.html" />
        
        
        <link rel="prev" href="../../marionette/regions/region_manager.html" />
        

        <meta property="og:title" content="Behavior | Official Backbone.Marionette Doc">
        <meta property="og:site_name" content="Official Backbone.Marionette Doc">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/alchapone">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        
    <div class="book" data-github="alchapone/marionette.doc" data-level="9" data-basepath="../.." data-revision="1397510262354">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/alchapone/marionette.doc" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    
    <a href="https://github.com/alchapone/marionette.doc/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/alchapone/marionette.doc/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1><a href="../../" >Official Backbone.Marionette Doc</a></h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/alchapone" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/alchapone/marionette.doc/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/alchapone/marionette.doc/edit/master/marionette/behavior/behavior.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        
        <li data-level="0" data-path="index.html">
            <a href="../../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="marionette/functions.html">
                
                <a href="../../marionette/functions.html">
                    <i class="fa fa-check"></i> <b>1.</b> Functions
                </a>
                
                
            </li>
        
            <li  data-level="2" data-path="marionette/application.html">
                
                <a href="../../marionette/application.html">
                    <i class="fa fa-check"></i> <b>2.</b> Application
                </a>
                
                
            </li>
        
            <li  data-level="3" data-path="marionette/application_module.html">
                
                <a href="../../marionette/application_module.html">
                    <i class="fa fa-check"></i> <b>3.</b> Application Module
                </a>
                
                
            </li>
        
            <li  data-level="4" data-path="marionette/app_router.html">
                
                <a href="../../marionette/app_router.html">
                    <i class="fa fa-check"></i> <b>4.</b> App Router
                </a>
                
                
            </li>
        
            <li  data-level="5" data-path="marionette/controller.html">
                
                <a href="../../marionette/controller.html">
                    <i class="fa fa-check"></i> <b>5.</b> Controller
                </a>
                
                
            </li>
        
            <li  data-level="6" data-path="marionette/configuration/configuration.html">
                
                <a href="../../marionette/configuration/configuration.html">
                    <i class="fa fa-check"></i> <b>6.</b> Configuration
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="6.1" data-path="marionette/configuration/renderer.html">
                            
                            <a href="../../marionette/configuration/renderer.html">
                                <i class="fa fa-check"></i> <b>6.1.</b> Renderer
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.2" data-path="marionette/configuration/template_cache.html">
                            
                            <a href="../../marionette/configuration/template_cache.html">
                                <i class="fa fa-check"></i> <b>6.2.</b> TemplateCache
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="7" data-path="marionette/view/view.html">
                
                <a href="../../marionette/view/view.html">
                    <i class="fa fa-check"></i> <b>7.</b> View
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="7.1" data-path="marionette/view/item_view.html">
                            
                            <a href="../../marionette/view/item_view.html">
                                <i class="fa fa-check"></i> <b>7.1.</b> Item View
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.2" data-path="marionette/view/collection_view.html">
                            
                            <a href="../../marionette/view/collection_view.html">
                                <i class="fa fa-check"></i> <b>7.2.</b> Collection View
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.3" data-path="marionette/view/composite_view.html">
                            
                            <a href="../../marionette/view/composite_view.html">
                                <i class="fa fa-check"></i> <b>7.3.</b> Composite View
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.4" data-path="marionette/view/layout.html">
                            
                            <a href="../../marionette/view/layout.html">
                                <i class="fa fa-check"></i> <b>7.4.</b> Layout
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="8" data-path="marionette/regions/region.html">
                
                <a href="../../marionette/regions/region.html">
                    <i class="fa fa-check"></i> <b>8.</b> Regions
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="8.1" data-path="marionette/regions/region_manager.html">
                            
                            <a href="../../marionette/regions/region_manager.html">
                                <i class="fa fa-check"></i> <b>8.1.</b> Region Manager
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="9" data-path="marionette/behavior/behavior.html">
                
                <a href="../../marionette/behavior/behavior.html">
                    <i class="fa fa-check"></i> <b>9.</b> Behavior
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="9.1" data-path="marionette/behavior/behaviors.html">
                            
                            <a href="../../marionette/behavior/behaviors.html">
                                <i class="fa fa-check"></i> <b>9.1.</b> Behaviors
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 94.11764705882354%;min-width: 88.23529411764706%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../../marionette/functions.html" title="Functions" class="chapter done new-chapter" data-progress="1" style="left: 5.882352941176471%;"></a>
    
        <a href="../../marionette/application.html" title="Application" class="chapter done new-chapter" data-progress="2" style="left: 11.764705882352942%;"></a>
    
        <a href="../../marionette/application_module.html" title="Application Module" class="chapter done new-chapter" data-progress="3" style="left: 17.647058823529413%;"></a>
    
        <a href="../../marionette/app_router.html" title="App Router" class="chapter done new-chapter" data-progress="4" style="left: 23.529411764705884%;"></a>
    
        <a href="../../marionette/controller.html" title="Controller" class="chapter done new-chapter" data-progress="5" style="left: 29.41176470588235%;"></a>
    
        <a href="../../marionette/configuration/configuration.html" title="Configuration" class="chapter done new-chapter" data-progress="6" style="left: 35.294117647058826%;"></a>
    
        <a href="../../marionette/configuration/renderer.html" title="Renderer" class="chapter done " data-progress="6.1" style="left: 41.1764705882353%;"></a>
    
        <a href="../../marionette/configuration/template_cache.html" title="TemplateCache" class="chapter done " data-progress="6.2" style="left: 47.05882352941177%;"></a>
    
        <a href="../../marionette/view/view.html" title="View" class="chapter done new-chapter" data-progress="7" style="left: 52.94117647058823%;"></a>
    
        <a href="../../marionette/view/item_view.html" title="Item View" class="chapter done " data-progress="7.1" style="left: 58.8235294117647%;"></a>
    
        <a href="../../marionette/view/collection_view.html" title="Collection View" class="chapter done " data-progress="7.2" style="left: 64.70588235294117%;"></a>
    
        <a href="../../marionette/view/composite_view.html" title="Composite View" class="chapter done " data-progress="7.3" style="left: 70.58823529411765%;"></a>
    
        <a href="../../marionette/view/layout.html" title="Layout" class="chapter done " data-progress="7.4" style="left: 76.47058823529412%;"></a>
    
        <a href="../../marionette/regions/region.html" title="Regions" class="chapter done new-chapter" data-progress="8" style="left: 82.3529411764706%;"></a>
    
        <a href="../../marionette/regions/region_manager.html" title="Region Manager" class="chapter done " data-progress="8.1" style="left: 88.23529411764706%;"></a>
    
        <a href="../../marionette/behavior/behavior.html" title="Behavior" class="chapter done new-chapter" data-progress="9" style="left: 94.11764705882354%;"></a>
    
        <a href="../../marionette/behavior/behaviors.html" title="Behaviors" class="chapter  " data-progress="9.1" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_5">
                    
                        <h1 id="marionette-behavior">Marionette.Behavior</h1>
<p>A <code>Behavior</code> is an  isolated set of DOM / user interactions that can be mixed into any <code>View</code>. <code>Behaviors</code> allow you to blackbox <code>View</code> specific interactions into portable logical chunks, keeping your <code>views</code> simple and your code DRY.</p>
<h2 id="documentation-index">Documentation Index</h2>
<ul>
<li><a href="#the-motivation">Motivation</a></li>
<li><a href="#using">Using Behaviors</a></li>
<li><a href="#api">API</a><ul>
<li><a href="#the-event-proxy">Event proxy</a></li>
<li><a href="#model-events">Model Events</a></li>
<li><a href="#model-events">Collection Events</a></li>
<li><a href="#-">$</a></li>
<li><a href="#-el">$el</a></li>
<li><a href="#defaults">Defaults</a></li>
<li><a href="#view">View</a></li>
</ul>
</li>
</ul>
<h2 id="the-motivation">The Motivation</h2>
<p>As you build more and more complex views you will find that your <code>view</code> becomes less about displaying model data, and more about interactions.</p>
<p>These interactions tend to be chunks of logic that you want to use in multiple views.</p>
<h2 id="using">Using</h2>
<p>Here is an example of a simple <code>itemView</code>. Let&#39;s take a stab at simplifying it, and abstracting behaviors from it.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> MyView = Marionette.ItemView.extend({
  ui: {
    <span class="hljs-string">"close"</span>: <span class="hljs-string">".close-btn"</span>
  },

  events: {
    <span class="hljs-string">"click @ui.close"</span>: <span class="hljs-string">"warnBeforeClose"</span>
  },

  warnBeforeClose: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    alert(<span class="hljs-string">"you are closing all your data is now gone!"</span>);
    <span class="hljs-keyword">this</span>.close();
  },

  onShow: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.ui.close.tooltip({
      text: <span class="hljs-string">"what a nice mouse you have"</span>
    });
  }
});
</code></pre>
<p>Interaction points such as tooltips and warning messages are generic concepts. There is no need to recode them within your views. They are prime for abstraction into a higher level non-coupled concept, which is exactly what Behaviors provide you with.</p>
<p>Here is the syntax for declaring which behaviors get used within a view.
The keys in the hash are passed to <code>getBehaviorClass</code> to lookup the correct <code>Behavior</code> class.
The options for each behavior are also passed to said Behavior during initialization. The options are then stored within each behavior under <code>options</code>.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> MyView = Marionette.ItemView.extend({
  ui: {
    <span class="hljs-string">"close"</span>: <span class="hljs-string">".close-btn"</span>
  },

  behaviors: {
    CloseWarn: {
      message: <span class="hljs-string">"you are closing all your data is now gone!"</span>
    },
    ToolTip: {
      text: <span class="hljs-string">"what a nice mouse you have"</span>
    }
  }
});
</code></pre>
<p>Now let&#39;s create the <code>CloseWarn</code> behavior.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> CloseWarn = Marionette.Behavior.extend({
  <span class="hljs-comment">// you can set default options</span>
  <span class="hljs-comment">// just like you can in your Backbone Models</span>
  <span class="hljs-comment">// they will be overriden if you pass in an option with the same key</span>
  defaults: {
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"you are closing!"</span>
  },

  <span class="hljs-comment">// behaviors have events that are bound to the views DOM</span>
  events: {
    <span class="hljs-string">"click @ui.close"</span>: <span class="hljs-string">"warnBeforeClose"</span>
  },

  warnBeforeClose: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    alert(<span class="hljs-keyword">this</span>.options.message);
    <span class="hljs-comment">// every Behavior has a hook into the</span>
    <span class="hljs-comment">// view that it is attached to</span>
    <span class="hljs-keyword">this</span>.view.close();
  }
});
</code></pre>
<p>And onto the <code>Tooltip</code> behavior.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> ToolTip = Marionette.Behavior.extend({
  ui: {
    tooltip: <span class="hljs-string">'.tooltip'</span>
  },

  onShow: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.ui.tooltip.tooltip({
      text: <span class="hljs-keyword">this</span>.options.text
    });
  }
});
</code></pre>
<p>There is one final piece to finalizing this. The user must define a location for where their <code>behaviors</code> are stored.
A simple example of this would look like this:</p>
<pre><code class="lang-js">  Marionette.Behaviors.behaviorsLookup = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> window.Behaviors;
  }
</code></pre>
<p>In this example you would then store your behaviors like this:</p>
<pre><code class="lang-js">window.Behaviors.ToolTip = ToolTip;
window.Behaviors.CloseWarn = CloseWarn;
</code></pre>
<h2 id="api">API</h2>
<h3 id="the-event-proxy">the event proxy</h3>
<p>Behaviors are powered by an event proxy. What this means is that any events that are triggered by the view&#39;s <code>triggerMethod</code> function are passed to each Behavior on the view as well.</p>
<p>As a real world example, whenever in your <code>view</code> you would have <code>onShow</code>, your behavior can also have this <code>onShow</code> method defined. The same follows for <code>modelEvents</code> and <code>collectionEvents</code>. Think of your behavior as a receiver for all of the events on your view instance.</p>
<p>This concept also allows for a nice decoupled method to communicate to behaviors from your view instance.
You can just call from within your view <code>this.triggerMethod(&quot;SomeEvent&quot;, {some: &quot;data&quot;})</code>. then your <code>behavior</code> class would look like this:</p>
<pre><code class="lang-js">Marionette.Behavior.extend({
    onSomeEvent: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> {</span>
        console.log(<span class="hljs-string">"wow such data"</span>, data);
    }
});
</code></pre>
<h3 id="model-events">Model Events</h3>
<p><code>modelEvents</code> will respond to the view&#39;s model events.</p>
<pre><code class="lang-js">  Marionette.Behavior.extend({
    modelEvents: {
      <span class="hljs-string">"change:doge"</span>: <span class="hljs-string">"onDogeChange"</span>
    },

    onDogeChange: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-comment">// buy more doge...</span>
    }
  });
</code></pre>
<h3 id="collection-events">Collection Events</h3>
<p><code>collectionEvents</code> will respond to the view&#39;s collection events.</p>
<pre><code class="lang-js">  Marionette.Behavior.extend({
    collectionEvents: {
      add: <span class="hljs-string">"onCollectionAdd"</span>
    },

    onCollectionAdd: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    }
  });
</code></pre>
<h3 id="-">$</h3>
<p><code>$</code> is a direct proxy of the views <code>$</code> lookup method.</p>
<pre><code class="lang-js">    Marionette.Behavior.extend({
        onShow: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">this</span>.$(<span class="hljs-string">'.zerg'</span>)
        }
    });
</code></pre>
<h3 id="-el">$el</h3>
<p><code>$el</code> is a direct proxy of the views <code>el</code> cached as a jquery selector.</p>
<pre><code class="lang-js">Marionette.Behavior.extend({
    onShow: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">this</span>.$el.fadeOut(<span class="hljs-string">'slow'</span>)
    }
});
</code></pre>
<h3 id="defaults">defaults</h3>
<p><code>defaults</code> can be a <code>hash</code> or <code>function</code> to define the default options for your behavior.
The default options will be overridden depending on what you set as the options per behavior (this works just like a <code>backbone.model</code>).</p>
<pre><code class="lang-js">Marionette.Behavior.extend({
    defaults: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'deepSpace'</span>: <span class="hljs-number">9</span>
        }
    }
});
</code></pre>
<pre><code class="lang-js">Marionette.Behavior.extend({
    defaults: {
            <span class="hljs-string">'dominion'</span>: <span class="hljs-string">'invasion'</span>,
            <span class="hljs-string">'doge'</span>: <span class="hljs-string">'amaze'</span>
    }
});
</code></pre>
<h3 id="view">view</h3>
<p>The <code>view</code> is a reference to the view instance that the <code>behavior</code> is on.</p>
<pre><code class="lang-js">Marionette.Behavior.extend({
    onShow: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">this</span>.view.close();
    }
});
</code></pre>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../../marionette/regions/region_manager.html" class="navigation navigation-prev"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../marionette/behavior/behaviors.html" class="navigation navigation-next"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
        <link rel="stylesheet" href="../../gitbook/style.css">
        
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../../gitbook/app.js"></script>
        
    </body>
</html>
